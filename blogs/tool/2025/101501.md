---
title: å…³äºæˆ‘å¼€å‘çš„ideaæ’ä»¶ï¼ˆMarkdown HTML Syntax Highlighterï¼‰
date: 2025/10/15
tags:
 - idea
 - java
categories:
 - tool
---

## èƒŒæ™¯

<div class="markdown-word-wrap">

æˆ‘çœŸçš„éå¸¸ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆideaçš„markdownæ’ä»¶å¯¹markdownæ–‡æœ¬ä¸­çš„ç®€å•htmlè¯­æ³•ä¸æ”¯æŒé«˜äº®æ˜¾ç¤ºï¼ˆä½†æ˜¯å¤æ‚htmlè¯­æ³•å’Œä»£ç å—æŒ‡å®šçš„htmlçš„ç‰‡æ®µæ˜¯å¯ä»¥é«˜äº®çš„ï¼‰ã€‚æˆ‘ç›´æ¥å†™ä¸€è¡Œhtmlé—­åˆæ ‡ç­¾æ˜¯æ²¡æœ‰è¯­æ³•é«˜äº®çš„ï¼Œæˆ‘çœŸçš„éå¸¸ç–‘æƒ‘ã€‚

</div>

ç®—äº†ï¼Œç›´æ¥å†™ä¸€ä¸ªideaæ’ä»¶å§ï¼Œå¤§æ¦‚å¯èƒ½ä¹Ÿå°±20å¤šè¡Œä»£ç 

---

## å®ç°

<div class="section-intro">

è¿™ç§å¯»æ‰¾å·¦æ ‡ç­¾å’ŒåŒ¹é…æ ‡ç­¾ï¼Œåƒèªæ˜çš„äººç›´æ¥ç”¨æ ˆæ¥å†™äº†ã€‚

</div>

ç®€å•å†™ä¸€ä¸‹ï¼Œå¤§æ¦‚æ˜¯è¿™æ ·å†™çš„

```kotlin
val openingTagsStack = Stack<String>()
for (element in elements) {
    if (isOpeningTag(element)) {
        openingTagsStack.push(getTagName(element))
    } else if (isClosingTag(element)) {
        if (!openingTagsStack.isEmpty() && openingTagsStack.peek() == getTagName(element)) {
            openingTagsStack.pop()
        } else {
            // å¤„ç†ä¸åŒ¹é…çš„é—­åˆæ ‡ç­¾
            highlightError(element)
        }
    }
}
```

<div class="highlight-box">

ä½†æ˜¯æˆ‘æ˜¯ä¸ªå•¥bï¼Œç›´æ¥æ­£åˆ™ï¼Œæ±‚åŠ©ç¾å›½æœ‹å‹ç»™æˆ‘ç”Ÿæˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼

</div>

```kotlin
private val HTML_TAG_PATTERN = Regex(
    "</?([a-zA-Z][a-zA-Z0-9]*)(\\s+[^>]*)?>|<([a-zA-Z][a-zA-Z0-9]*)(\\s+[^>]*)?/>"
)
private val HTML_TAG_NAME_PATTERN = Regex("</?([a-zA-Z][a-zA-Z0-9]*)")
private val HTML_ATTRIBUTE_PATTERN = Regex("([a-zA-Z][a-zA-Z0-9-]*)\\s*=\\s*(\"[^\"]*\"|'[^']*'|[^\\s>]+)")
private val HTML_COMMENT_PATTERN = Regex("<!--[\\s\\S]*?-->")
```

<div class="info-box">

å½“å½“å½“ï¼Œç”Ÿæˆå¥½äº†

å­¦è¿‡æ­£åˆ™è¡¨è¾¾å¼çš„å°ä¼™ä¼´ä»¬ä¹Ÿè®¸å¯ä»¥çœ‹å‡ºæ¥ï¼Œ<span class="code-term">HTML_TAG_PATTERN</span>æ˜¯åŒ¹é…htmlæ ‡ç­¾çš„ï¼Œ<span class="code-term">HTML_TAG_NAME_PATTERN</span>æ˜¯åŒ¹é…æ ‡ç­¾åçš„ï¼Œ<span class="code-term">HTML_ATTRIBUTE_PATTERN</span>æ˜¯åŒ¹é…å±æ€§çš„ï¼Œ<span class="code-term">HTML_COMMENT_PATTERN</span>æ˜¯åŒ¹é…æ³¨é‡Šçš„

</div>

æ¥ä¸‹æ¥è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿï¼Ÿ

å½“ç„¶æ˜¯å¯»æ‰¾åŒ¹é…çš„å…ƒç´ å•¦

```kotlin
if (!HTML_TAG_PATTERN.containsMatchIn(text) && !HTML_COMMENT_PATTERN.containsMatchIn(text)) {
    return
}
```

<div class="question-box">

æœ‰äººé—®ï¼Œè¿™æ ·æ•ˆç‡æ˜¯ä¸æ˜¯ä½äº†ï¼Œæ²¡æœ‰ä¸€äº›å‰ªæçš„éƒ¨åˆ†ï¼Ÿï¼Ÿ

é‚£è¿™äº›è‚¯å®šä¸å…³æˆ‘äº‹äº†ï¼Œé‡åˆ°é—®é¢˜å†ä¼˜åŒ–å§ï¼Œä½ å°±è¯´åŠŸèƒ½æœ‰æ²¡æœ‰å®ç°å§

</div>

åé¢åˆæ€ä¹ˆå†™å‘¢ï¼Ÿï¼Ÿ

è¿™è¿˜è¦é—®ï¼Œè‚¯å®šæ˜¯æ‰¾æ’ä»¶çš„Apiè¿›è¡Œé«˜äº®æ˜¾ç¤ºå•¦

```kotlin
HTML_COMMENT_PATTERN.findAll(text).forEach { matchResult ->
            val start = baseOffset + matchResult.range.first
            val end = baseOffset + matchResult.range.last + 1
            holder.newSilentAnnotation(HighlightSeverity.INFORMATION)
                .range(TextRange(start, end))
                .textAttributes(DefaultLanguageHighlighterColors.BLOCK_COMMENT)
                .create()
        }
```

<div class="success-box">

è¿™æ ·ä¹‹åå†è¿›è¡Œæ‰“åŒ…æµ‹è¯•å°±è¡Œäº†ï¼Œè¿™å¯¹å¤§å®¶æ¥è¯´æœ‰æ‰‹å°±è¡Œ

</div>

---

<div class="links-section">

ğŸ“¦ ä»“åº“åœ°å€ï¼š[https://github.com/ShiYioo/markdown-html-syntax-highlighter](https://github.com/ShiYioo/markdown-html-syntax-highlighter)

ğŸ”Œ æ’ä»¶åœ°å€ï¼š[https://plugins.jetbrains.com/plugin/28714-markdown-html-syntax-highlighter?noRedirect=true](https://plugins.jetbrains.com/plugin/28714-markdown-html-syntax-highlighter?noRedirect=true)

</div>

<style>
.markdown-word-wrap {
    background-color: #fff9e6;
    border-radius: 15px;
    padding: 15px 20px;
    border-left: 4px solid #ffc107;
    margin: 10px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.dark .markdown-word-wrap {
    background-color: #2e2e2e;
    color: #ffffff;
    border-left: 4px solid #ffa726;
}

.section-intro {
    background: linear-gradient(to right, #e3f2fd, #f3e5f5);
    padding: 12px 18px;
    border-radius: 10px;
    margin: 15px 0;
    font-weight: 500;
}

.dark .section-intro {
    background: linear-gradient(to right, #1a237e, #4a148c);
}

.highlight-box {
    background-color: #ffe6f0;
    padding: 12px 18px;
    border-radius: 10px;
    margin: 15px 0;
    border-left: 4px solid #e91e63;
}

.dark .highlight-box {
    background-color: #3d2631;
    border-left: 4px solid #f48fb1;
}

.info-box {
    background-color: #e8f5e9;
    padding: 15px 20px;
    border-radius: 10px;
    margin: 15px 0;
    border-left: 4px solid #4caf50;
}

.dark .info-box {
    background-color: #1b5e20;
    border-left: 4px solid #81c784;
}

.code-term {
    background-color: #f5f5f5;
    padding: 2px 8px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.9em;
    color: #d32f2f;
    font-weight: 600;
}

.dark .code-term {
    background-color: #424242;
    color: #ff6b6b;
}

.question-box {
    background-color: #fff3e0;
    padding: 12px 18px;
    border-radius: 10px;
    margin: 15px 0;
    border-left: 4px solid #ff9800;
    font-style: italic;
}

.dark .question-box {
    background-color: #4e3a24;
    border-left: 4px solid #ffb74d;
}

.success-box {
    background-color: #e0f2f1;
    padding: 12px 18px;
    border-radius: 10px;
    margin: 15px 0;
    border-left: 4px solid #009688;
    font-weight: 500;
}

.dark .success-box {
    background-color: #1e4a47;
    border-left: 4px solid #4db6ac;
}

.links-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px 25px;
    border-radius: 15px;
    margin: 20px 0;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}

.links-section a {
    color: #fff;
    text-decoration: underline;
    font-weight: 500;
}

.links-section a:hover {
    color: #ffe082;
}

.dark .links-section {
    background: linear-gradient(135deg, #434343 0%, #000000 100%);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
}
</style>
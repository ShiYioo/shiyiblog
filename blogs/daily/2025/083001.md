---
title: idea卡顿和占用高怎么办？？
date: 2025/08/30
tags:
 - idea
 - java
categories:
 - daily
---

### 背景
最近闲的时候看了看一个交流群，发现佬友在交流关于idea卡顿的问题，并且提出了一些具体方案

### 解决方案
众所周知，idea是用java写的，运行的JDK是<span class="markdown-word-wrap">JetBrains Runtime</span>，java这语言性能本身肯定是不能和go和rust相提并论的，而且在idea这么丰富的功能下，很难避免卡顿和内存占用高的

::: tip
JetBrains Runtime (JBR) 是 JetBrains 公司维护的一个 <span class="markdown-word-wrap"> OpenJDK</span> 的分支（fork）。简单来说，它是一个为 JetBrains 旗下所有桌面产品（如 IntelliJ IDEA, PyCharm, WebStorm 等）量身定制和优化的 Java 运行环境 (JRE/JDK)。修复了各种已知的 OpenJDK 和 Oracle JDK 错误，并提供了更好的性能和稳定性。该版本目前最新的是JDK 21 
:::

#### 1. 提高idea最大堆内存，提高机器的配置（加钱）
在主菜单中，前往 帮助，可以发现一个类似更改最大堆内存的选项或者可以改idea的虚拟机参数，如果你的内存足够大，你可以尝试这个选项来减缓卡顿现象

#### 2. 更改垃圾回收器为ZGC
在你的idea的虚拟机参数上加上
```bash
-XX:+UseZGC // 使用ZGC
-XX:+ZGenerational //启动 分代ZGC JDK 21才引入的，但是我们的idea最新的JDK刚好是JDK 21
```

::: tip
<span class='markdown-word-wrap'>ZGC</span> 是一款由 <span class="markdown-word-wrap">Oracle</span> 开发的、可伸缩的、低延迟的垃圾回收器。它的设计目标只有一个，也是它最引以为傲的特点：无论你的 Java 堆内存有多大（从几百 MB 到十几 TB），它的<span class="markdown-word-wrap">“Stop-The-World”(STW)</span> 暂停时间都能稳定地控制在 1 毫秒以下。
:::

#### 3. 尝试更换JDK
是的，你没听错，idea是允许你更换JDK的，意思是你可以不使用JetBrains Runtime，你可以直接更换到JDK 24甚至是JDK 25 开启
<span class="markdown-word-wrap">紧凑对象头</span>。

```bash
-XX:UseCompactObjectHeaders
```

它可以大大减少idea的内存占用
但是嘛，这方案有一些缺点，因为idea是因为JetBrains Runtime才能完美渲染自己的UI和字体，你如果更换的话，UI和字体的体验会大大打折扣。可能还会遇到其他的问题（我刚换的时候，发现UI和字体让我很不舒服，我就立马换回来了）


>> 参考文献 [https://www.jetbrains.com/zh-cn/help/idea/switching-boot-jdk.html](https://www.jetbrains.com/zh-cn/help/idea/switching-boot-jdk.html)

<style>
.markdown-word-wrap {
    background-color: yellow;
    border-radius: 15px;
}

.dark .markdown-word-wrap {
    background-color: #2e2e2e;
    color: #ffffff;
}
</style>